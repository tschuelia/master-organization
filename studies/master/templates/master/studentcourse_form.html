{% extends "master/base.html" %}
{% load crispy_forms_tags %}
{% block content %}
<form method="POST">
{% csrf_token %}
    <fieldset class="form-group">
        <legend class="border-bottom mb-4">Neue Studienleistung anlegen</legend>
        {{ form|crispy }}
    </fieldset>
        <button class="btn btn-outline-info" type="submit">Speichern</button>
</form>
{{ form.media }}
{% endblock content %}

{% block javascript %}
    <script type="text/javascript">
    // Hack to re-render the course selector if a new course was added
    // listening to on('change') does not work
      let oldLen = 0
      setInterval(() => {
        const newLen = $('#id_course option').length
        if (newLen != oldLen) {
          oldLen = newLen
          $('#id_course').selectpicker('refresh')
        }
      }, 500)
    </script>
{% endblock javascript %}